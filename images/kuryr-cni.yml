arches:
- x86_64
- ppc64le
content:
  source:
    dockerfile: openshift-kuryr-cni-rhel8.Dockerfile
    git:
      branch:
        target: release-{MAJOR}.{MINOR}
      url: git@github.com:openshift-priv/kuryr-kubernetes.git
      web: https://github.com/openshift/kuryr-kubernetes
    pkg_managers: [] # Disabling pip cachito, deps are rpm managed despite presence of pip files
    ci_alignment:
      streams_prs:
        ci_build_root:
          stream: rhel-9-golang-ci-build-root
enabled_repos:
- rhel-9-baseos-rpms
- rhel-9-appstream-rpms
- rhel-9-fast-datapath-rpms
- rhel-9-server-ose-rpms-embargoed
- openstack-16-for-rhel-9-rpms

# Generally doozer scan-sources will detect all possible change factors automatically and trigger rebuilds.
# However, certain images may consume RPMs in unexpected way that make it programmatically impossible to
# detect they were used.
scan_sources:
  # The openstack-16-for-rhel-9-rpms repo provides some python3-* packages newer than those from rhel-9-baseos-rpms.
  # For some reason this image doesn't consume those newer versions.
  exempted_packages:
  - python3-six
  - python3-dateutil

for_payload: true
from:
  builder:
  - stream: golang
  member: openshift-base-rhel9
name: openshift/ose-kuryr-cni
owners:
- kuryr-team@redhat.com
- mdulko@redhat.com
non_shipping_repos:
- rhel-9-server-ose-rpms-embargoed
